{% extends 'base.html' %}
{% load static %}

{% block title %}
    Landing Page
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'profile_setup.css' %}">
{% endblock %}

{% block content %}
<main class="container">
    <h1>Profile</h1>
    <div class="profile-picture">
        <!-- Profile picture display with default fallback -->
        <img
            src="{{navbar_profile_picture  }}"
            alt="Profile Picture"
            id="profile-pic">

    </div>


    <form method="POST" enctype="multipart/form-data" action="{% url 'profile_setup' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="form-group">
            <label for="school">School</label>
            <input type="text" id="school" name="school" value="{{ profile.school }}" required placeholder="e.g., Boston College">
        </div>
        <div class="form-group">
            <label for="graduation-year">Year of Graduation</label>
            <input type="number" id="graduation-year" name="graduation_year" value="{{ profile.graduation_year }}" required min="2024" max="2030" placeholder="e.g., 2025">
        </div>
        <div class="form-group">
            <label for="major1">Primary Major</label>
            <input type="text" id="major1" name="major1" value="{{ profile.major1 }}" required placeholder="e.g., Computer Science"> <!-- Primary Major -->
        </div>
        <div class="form-group">
            <label for="major2">Secondary Major (Optional)</label>
            <input type="text" id="major2" name="major2" value="{{ profile.major2 }}" placeholder="e.g., Finance"> <!-- Secondary Major -->
        </div>
        <button type="submit">Save Profile</button>
    </form>
</main>

<script>
  document.addEventListener('DOMContentLoaded', () => {
      const chooseFile = document.getElementById('choose-file');
      const profilePic = document.getElementById('profile-pic');
      const navbarProfilePic = document.getElementById('navbar-profile-pic'); // For navbar if exists

      // Update profile picture preview after file upload
      chooseFile.addEventListener('change', (event) => {
          const [file] = event.target.files; // Extract the first file
          if (file) { // Check if a file was selected
              profilePic.src = URL.createObjectURL(file); // Update profile picture preview
              if (navbarProfilePic) {
                  navbarProfilePic.src = URL.createObjectURL(file); // Optional: Update navbar picture
              }
          }
      });
  });
</script>

{% endblock %}
